<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IoT Carrito</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="icon" type="image/x-icon" href="assets/img/omega.png" />
  </head>
  <body>
    <!-- Navbar Gaming -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid px-4">
        <a class="navbar-brand" href="#">
          <!-- Icono personalizado - reemplaza "assets/img/logo.png" con tu imagen -->
          <img
            src="assets/img/logo.jpeg"
            alt="IoT Carrito Logo"
            class="brand-logo"
          />
          <span class="brand-text">IOT CARRITO</span>
        </a>
        <div
          class="navbar-nav ms-auto d-flex flex-row align-items-center gap-3"
        >
          <a class="nav-link-gaming" href="monitor/">
            <span class="nav-icon">üìä</span> Monitor
          </a>
          <span class="server-info">52.4.229.72:5500</span>
        </div>
      </div>
    </nav>

    <main class="container-fluid mt-4 px-3">
      <div class="row g-4">
        <!-- üéÆ PANEL DE CONTROL PRINCIPAL -->
        <section class="col-lg-6 col-xl-5">
          <div class="gaming-card">
            <div class="card-header-gaming">
              <span class="header-icon">üéÆ</span> CONTROL PANEL
            </div>
            <div class="card-body p-3">
              <!-- Device & Client IDs -->
              <div class="row g-2 mb-3">
                <div class="col-6">
                  <label class="form-label-gaming">Device ID</label>
                  <input
                    id="deviceId"
                    class="form-control-gaming"
                    type="number"
                    value="1"
                  />
                </div>
                <div class="col-6">
                  <label class="form-label-gaming">Client ID</label>
                  <input
                    id="clientId"
                    class="form-control-gaming"
                    type="number"
                    value="1"
                  />
                </div>
              </div>

              <!-- Status Display -->
              <div class="status-display mb-3">
                <div class="status-label">STATUS</div>
                <div id="statusText">Esperando comando...</div>
              </div>

              <!-- OCTAGONAL CONTROLLER LAYOUT -->
              <div class="octagonal-controller">
                <!-- Centro con velocidades -->
                <div class="controller-center">
                  <div class="speed-controls">
                    <button
                      id="btnSpeedUp"
                      class="btn-speed-center btn-speed-up"
                      title="Aumentar Velocidad"
                    >
                      <span class="speed-icon">‚ö°</span>
                      <span class="speed-text">R√ÅPIDO</span>
                    </button>
                    <button
                      id="btnSpeedNormal"
                      class="btn-speed-center btn-speed-normal"
                      title="Velocidad Normal"
                    >
                      <span class="speed-icon">‚ûñ</span>
                      <span class="speed-text">NORMAL</span>
                    </button>
                    <button
                      id="btnSpeedDown"
                      class="btn-speed-center btn-speed-down"
                      title="Reducir Velocidad"
                    >
                      <span class="speed-icon">üê¢</span>
                      <span class="speed-text">LENTO</span>
                    </button>
                  </div>
                </div>

                <!-- Bot√≥n Superior: Adelante -->
                <button
                  id="btnForward"
                  class="octagonal-btn octagonal-top"
                  title="Adelante (ID: 1)"
                >
                  <span class="btn-icon">‚¨ÜÔ∏è</span>
                  <span class="btn-label">ADELANTE</span>
                </button>

                <!-- Bot√≥n Superior Derecho: Giro Adelante Derecha -->
                <button
                  id="btnTurnRight"
                  class="octagonal-btn octagonal-top-right"
                  title="Giro Adelante Derecha (ID: 9)"
                >
                  <span class="btn-icon">‚ÜóÔ∏è</span>
                  <span class="btn-label">GIRO<br />90¬∞ IZQUIERDA</span>
                </button>

                <!-- Bot√≥n Derecho: Giro Atr√°s Derecha -->
                <button
                  id="btnRight"
                  class="octagonal-btn octagonal-right"
                  title="Giro Atr√°s Derecha (ID: 5)"
                >
                  <span class="btn-icon">‚û°Ô∏è</span>
                  <span class="btn-label">GIRO<br />Adelante DER</span>
                </button>

                <!-- Bot√≥n Inferior Derecho: 90¬∞ Derecha -->
                <button
                  id="btn90Right"
                  class="octagonal-btn octagonal-bottom-right"
                  title="90¬∞ Derecha (ID: 10)"
                >
                  <span class="btn-icon">‚ÜòÔ∏è</span>
                  <span class="btn-label">360¬∞<br />DERECHA</span>
                </button>

                <!-- Bot√≥n Inferior: Atr√°s -->
                <button
                  id="btnBack"
                  class="octagonal-btn octagonal-bottom"
                  title="Atr√°s (ID: 2)"
                >
                  <span class="btn-icon">‚¨áÔ∏è</span>
                  <span class="btn-label">ATR√ÅS</span>
                </button>

                <!-- Bot√≥n Inferior Izquierdo: 90¬∞ Izquierda -->
                <button
                  id="btn90Left"
                  class="octagonal-btn octagonal-bottom-left"
                  title="90¬∞ Izquierda (ID: 7)"
                >
                  <span class="btn-icon">‚ÜôÔ∏è</span>
                  <span class="btn-label">GIRO¬∞<br />ATRAS IZQ</span>
                </button>

                <!-- Bot√≥n Izquierdo: Giro Atr√°s Izquierda -->
                <button
                  id="btnLeft"
                  class="octagonal-btn octagonal-left"
                  title="Giro Atr√°s Izquierda (ID: 4)"
                >
                  <span class="btn-icon">‚¨ÖÔ∏è</span>
                  <span class="btn-label">GIRO<br />ADELANTE IZQ</span>
                </button>

                <!-- Bot√≥n Superior Izquierdo: Giro Adelante Izquierda -->
                <button
                  id="btnTurnLeft"
                  class="octagonal-btn octagonal-top-left"
                  title="Giro Adelante Izquierda (ID: 6)"
                >
                  <span class="btn-icon">‚ÜñÔ∏è</span>
                  <span class="btn-label">GIRO<br />ATRAS DER</span>
                </button>

                <!-- Botones adicionales en esquinas externas -->
                <!-- 360¬∞ Izquierda -->
                <button
                  id="btn360Left"
                  class="octagonal-btn octagonal-extra-left"
                  title="360¬∞ Izquierda (ID: 8)"
                >
                  <span class="btn-icon">üîÑ</span>
                  <span class="btn-label">90¬∞<br />DERECHA</span>
                </button>

                <!-- Stop -->
                <button
                  id="btnStop"
                  class="octagonal-btn octagonal-extra-top"
                  title="Detener (ID: 3)"
                >
                  <span class="btn-icon">‚èπÔ∏è</span>
                  <span class="btn-label">DETENER</span>
                </button>

                <!-- 360¬∞ Derecha -->
                <button
                  id="btn360Right"
                  class="octagonal-btn octagonal-extra-right"
                  title="360¬∞ Derecha (ID: 11)"
                >
                  <span class="btn-icon">üîÅ</span>
                  <span class="btn-label">360¬∞<br />IZQUIERDA</span>
                </button>
              </div>

              <!-- Manual Operation -->
              <div class="manual-section mt-4">
                <div class="section-title">OPERACI√ìN MANUAL</div>
                <div class="input-group-gaming mb-3">
                  <span class="input-label">ID Operaci√≥n</span>
                  <input
                    id="opId"
                    type="number"
                    class="form-control-gaming flex-grow-1"
                    value="1"
                  />
                  <button id="btnSendOp" class="btn-action btn-action-primary">
                    ENVIAR
                  </button>
                </div>
                <div class="info-text">
                  IDs: 1=Adelante, 2=Atr√°s, 3=Detener, 4=Giro Atr√°s Izq, 5=Giro
                  Atr√°s Der, 6=Giro Adelante Izq, 7=90¬∞ Izq, 8=360¬∞ Izq, 9=Giro
                  Adelante Der, 10=90¬∞ Der, 11=360¬∞ Der
                </div>
              </div>

              <!-- Random Sequence - Versi√≥n Mejorada -->
              <div class="manual-section mt-3">
                <div class="section-title">SECUENCIA ALEATORIA</div>
                <div class="input-group-gaming mb-2">
                  <span class="input-label">Longitud</span>
                  <input
                    id="seqLength"
                    type="number"
                    class="form-control-gaming"
                    style="width: 80px"
                    value="5"
                    min="1"
                    max="20"
                  />
                  <button
                    id="btnGenerateSeq"
                    class="btn-action btn-action-success"
                  >
                    GENERAR
                  </button>
                </div>
                <div style="margin-top: 5px">
                  <pre
                    id="seqOutput"
                    class="output-display"
                    style="
                      min-height: 80px;
                      max-height: 200px;
                      overflow-y: auto;
                      padding: 10px;
                    "
                  ></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- üìä MONITOR EN TIEMPO REAL -->
        <section class="col-lg-6 col-xl-4">
          <div class="gaming-card">
            <div class="card-header-gaming">
              <span class="header-icon">üì°</span> MONITOR TIEMPO REAL
            </div>
            <div class="card-body p-3">
              <div id="wsStatus" class="mb-3 text-center">
                <span class="ws-badge ws-disconnected">‚ö´ DESCONECTADO</span>
              </div>

              <div id="events" class="events-container"></div>

              <div class="controls-footer mt-3">
                <div class="d-flex flex-wrap gap-2">
                  <button
                    id="btnConnectWs"
                    class="btn-action btn-action-success flex-grow-1"
                  >
                    üîå Conectar WS
                  </button>
                  <button
                    id="btnCheckBackend"
                    class="btn-action btn-action-primary"
                  >
                    ‚úì Check
                  </button>
                  <button
                    id="btnLoadHistory"
                    class="btn-action btn-action-primary"
                  >
                    üìú Historial
                  </button>
                  <input
                    id="historyCount"
                    type="number"
                    value="10"
                    min="1"
                    class="form-control-gaming"
                    style="width: 70px"
                  />
                  <button
                    id="btnClearLog"
                    class="btn-action btn-action-secondary"
                  >
                    üóëÔ∏è
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- üìã √öLTIMO EVENTO & OBST√ÅCULO -->
        <section class="col-lg-12 col-xl-3">
          <!-- √öltimo Evento -->
          <div class="gaming-card mb-3">
            <div class="card-header-gaming">
              <span class="header-icon">üîç</span> √öLTIMO EVENTO
            </div>
            <div class="card-body p-3">
              <label class="form-label-gaming">ID Dispositivo</label>
              <input
                id="lastDeviceId"
                type="number"
                class="form-control-gaming mb-3"
                value="1"
              />
              <button
                id="btnGetLast"
                class="btn-action btn-action-primary w-100 mb-2"
              >
                OBTENER √öLTIMO
              </button>
              <pre id="lastOutput" class="output-display"></pre>
            </div>
          </div>

          <!-- Obst√°culo -->
          <div class="gaming-card">
            <div class="card-header-gaming">
              <span class="header-icon">‚ö†Ô∏è</span> OBST√ÅCULO
            </div>
            <div class="card-body p-3">
              <label class="form-label-gaming">ID Obst√°culo</label>
              <input
                id="obstId"
                type="number"
                class="form-control-gaming mb-3"
                value="1"
              />
              <button
                id="btnSendObst"
                class="btn-action btn-action-danger w-100"
              >
                ENVIAR OBST√ÅCULO
              </button>
              <div class="info-text mt-2">
                1=Adelante, 2=Adelante-Izq, 3=Adelante-Der, 4=Ambos, 5=Retrocede
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="footer-gaming">
      <div class="container">
        <div class="footer-content">
          üéÆ Gaming IoT Control System ‚Ä¢ Powered by ESP8266 ‚Ä¢ AWS Cloud
          Infrastructure
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
